{% extends 'base.twig' %}

{% block content %}
<section class="bg-greylight">
    <div class="container">
        {% do action('woocommerce_before_main_content') %}

        <form data-filter-form data-post-type="product">
            <input type="hidden" name="posts_per_page" value="{{ posts_per_page }}">
            <input type="hidden" name="col_class" value="{{ col_class }}">
            <div class="row">
                <div class="col-md-3 mb-4 mb-md-0">
                    <div class="row mb-4">
                        <div class="col">
                            <h4 class="m-0">{{ title }}</h4>
                        </div>
                        <div class="col-auto">
                            <button type="reset" class="btn btn-sm btn-outline-dark" data-filter-reset>
                                Reset filters
                            </button>
                        </div>
                    </div>

                    <div class="mb-4">
                        <input type="search" name="s" class="form-control" placeholder="Zoek producten" value="{{ search_query }}">
                    </div>

                    {{ filter(filters.price) }}
                    {{ filter(filters.stock) }}
                    {{ filter(filters.stock_status, {
                        label: 'Beschikbaarheid',
                        show_field_label: true
                    }) }}
                </div>
                <div class="col-md-9">
                    <div class="row mb-5">
                        <div class="col-sm d-flex align-items-center">
                            <p id="result-count" class="m-0" data-result-count>{{ total }} resultaten gevonden</p>
                        </div>
                        <div class="col-sm-auto d-flex align-items-center">
                            {{ sort_select(orderby, {
                                id: 'orderby',
                                name: 'orderby',
                                layout: 'horizontal',
                                options: {
                                    'menu_order': 'Standaard',
                                    'popularity': 'Populair',
                                    'rating': 'Waardering',
                                    'date': 'Nieuwste eerst',
                                    'price': 'Prijs laag-hoog',
                                    'price-desc': 'Prijs hoog-laag'
                                }
                            }) }}
                        </div>
                    </div>

                    <div class="position-relative">
                        <div id="filter-loader" data-filter-loader class="filter-overlay d-none">
                            <div class="spinner-border text-secondary" role="status" aria-hidden="true"></div>
                        </div>

                        <div id="filter-results">
                            {% set posts = products %}
                            {% set max_pages = max_num_pages %}
                            {% include 'partials/list.twig' %}
                        </div>

                        {% if current_page < max_num_pages %}
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-outline-dark" data-load-more>
                                Laad meer
                            </button>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </form>

        {% do action('woocommerce_after_main_content') %}
    </div>
</section>
{% endblock %}
