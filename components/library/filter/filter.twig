{% set name = name ?? data.acf_field ?? data.name ?? '' %}
{% set acf_field = data.acf_field ?? name %}
{% set value = value ?? data.value ?? '' %}
{% set type = type ?? data.type ?? '' %}
{% set label = label ?? data.label ?? '' %}
{% set options = options ?? data.options ?? {} %}
{% set placeholder = placeholder ?? data.placeholder ?? 'Maak een keuze' %}

{% if not name %}
  <pre>‚ùå Ongeldige filterdata ontvangen
  {{ dump(data) }}</pre>
{% endif %}

<div class="mb-4">
  {% if label %}
    <label class="form-label">{{ label }}</label>
  {% endif %}

  {# Single Select #}
  {% if type == 'select' %}
    <select name="{{ name }}" class="form-select">
      <option value="">{{ placeholder }}</option>
      {% for key, val in options %}
        <option value="{{ val }}" {{ val == value ? 'selected' : '' }}>{{ key }}</option>
      {% endfor %}
    </select>

  {# Radio Buttons (single choice) #}
  {% elseif type == 'radio' %}
    {% for key, val in options %}
      <div class="form-check">
        <input class="form-check-input"
               type="radio"
               name="{{ name }}"
               id="{{ name ~ '-' ~ loop.index }}"
               value="{{ val }}"
               {{ val == value ? 'checked' : '' }}>
        <label class="form-check-label" for="{{ name ~ '-' ~ loop.index }}">
          {{ key }}
        </label>
      </div>
    {% endfor %}

  {# Checkboxes (multi) #}
  {% elseif type == 'checkbox' %}
    {% set selected = value is iterable ? value : [value] %}
    {% for key, val in options %}
      <div class="form-check">
        <input class="form-check-input"
               type="checkbox"
               name="{{ name }}[]"
               id="{{ name }}_{{ loop.index }}"
               value="{{ val }}"
               {{ val in selected ? 'checked' : '' }}>
        <label class="form-check-label" for="{{ name }}_{{ loop.index }}">{{ key }}</label>
      </div>
    {% endfor %}

  {# Range Slider + Input #}
  {% elseif type == 'range' %}
    <div class="range-wrapper">
      <div class="d-flex gap-2 align-items-center mb-3">
        <input type="number"
               class="form-control"
               name="min_{{ acf_field }}"
               value="{{ value.min ?? options.min }}"
               min="{{ options.min }}"
               max="{{ options.max }}">

        <span class="text-muted">tot</span>

        <input type="number"
               class="form-control"
               name="max_{{ acf_field }}"
               value="{{ value.max ?? options.max }}"
               min="{{ options.min }}"
               max="{{ options.max }}">
      </div>

      <div class="range-slider"
           data-slider
           data-min="{{ options.min }}"
           data-max="{{ options.max }}">
      </div>
    </div>
  {% endif %}
</div>