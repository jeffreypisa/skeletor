{#
üß© Filter Component ‚Äì filter.twig

Gebruik dit component uitsluitend voor presentatie-instellingen van filters.

Voorbeeld:
{{ filter(filters.uren, {
  limit_options: 3,
  option_list_expand_label: 'Meer opties',
  option_list_collapse_label: 'Minder opties',
  placeholder: 'Maak een keuze',
  layout: 'horizontal',
  show_field_label: true,
  show_option_counts: true,
  button_class: 'btn-outline-primary',
  all_label: 'Alles',
  show_all_button: true,
  date_format: 'd-m-Y'
}) }}

Types: 'select', 'checkbox', 'radio', 'buttons', 'range', 'date' en 'date_range'.

Datumfilters vullen automatisch de oudste en nieuwste beschikbare datum in wanneer er geen waarde is opgegeven.

Beschikbare data-opties: `name`, `label`, `type`, `source`, `options`, `value`, `sort_options`, `hide_empty_options`.

Beschikbare presentatie-opties:
- limit_options: int ‚Äì aantal direct zichtbare opties v√≥√≥r "Toon meer"
- option_list_expand_label: string ‚Äì tekst voor uitklappen
- option_list_collapse_label: string ‚Äì tekst voor inklappen
- placeholder: string ‚Äì placeholdertekst bij select
- layout: 'vertical' (default) of 'horizontal'
- show_field_label: true/false (default: true)
- show_option_counts: true/false ‚Äì toon aantal resultaten per optie
- date_format: string ‚Äì formaat voor datumvelden
- button_class: string ‚Äì knopstijl (alleen voor type 'buttons')
- all_label: string ‚Äì label voor 'alles'-knop (alleen voor type 'buttons')
- show_all_button: true/false ‚Äì toon 'alles'-knop (alleen voor type 'buttons')
#}

{% set name = name ?? acf_field ?? '' %}
{% set acf_field = acf_field ?? name %}
{% set value = value ?? '' %}
{% set type = type ?? '' %}
{% set label = label ?? '' %}
{% set options = options ?? {} %}
{% set placeholder = placeholder ?? 'Maak een keuze' %}
{% set show_field_label = show_field_label ?? true %}
{% set show_option_counts = show_option_counts ?? false %}
{% set limit_options = limit_options ?? 0 %}
{% set option_list_expand_label = option_list_expand_label ?? 'Toon meer' %}
{% set option_list_collapse_label = option_list_collapse_label ?? 'Toon minder' %}
{% set date_format = date_format ?? 'd-m-Y' %}
{% set layout = layout ?? null %}

{% if not name %}
  <pre>‚ùå Ongeldige filterdata ontvangen</pre>
{% else %}

<div class="mb-4">
        {# Single Select #}
        {% if type == 'select' %}
        {% set select_layout = layout ?? 'vertical' %}
        {% if select_layout == 'horizontal' %}
        <div class="d-flex align-items-center gap-2">
                {% if label and show_field_label %}
                <label class="form-label mb-0">{{ label }}</label>
                {% endif %}
                <select name="{{ name }}" class="form-select">
                        <option value="">{{ placeholder }}</option>
                        {% for key, val in options %}
                        <option value="{{ val }}" {{ val == value ? 'selected' : '' }}>{{ key }}</option>
                        {% endfor %}
                </select>
        </div>
        {% else %}
                {% if label and show_field_label %}
                <label class="form-label">{{ label }}</label>
                {% endif %}
                <select name="{{ name }}" class="form-select">
                        <option value="">{{ placeholder }}</option>
                        {% for key, val in options %}
                        <option value="{{ val }}" {{ val == value ? 'selected' : '' }}>{{ key }}</option>
                        {% endfor %}
                </select>
        {% endif %}

        {# Radio of Checkbox #}
        {% elseif type == 'checkbox' or type == 'radio' %}
        {% if label and show_field_label %}
        <label class="form-label">{{ label }}</label>
        {% endif %}
        {% set selected = value is iterable ? value : [value] %}
        <div class="filter-options-wrapper" data-limit-options="{{ limit_options }}" data-expand-label="{{ option_list_expand_label }}" data-collapse-label="{{ option_list_collapse_label }}">
                {% for key, val in options %}
                <div class="form-check">
			<label class="form-check-label">
				<input class="form-check-input" type="{{ type }}" name="{{ name }}{% if type == 'checkbox' %}[]{% endif %}" value="{{ val }}" {% if val in selected %}checked{% endif %}>
                                {{ key }}
            {% if show_option_counts and option_counts[val] is defined %}
              <span class="muted">(<span class="filter-option-count" data-option-count="{{ name }}:{{ val }}">{{ option_counts[val] }}</span>)</span>
            {% endif %}
			</label>
		</div>
		{% endfor %}

		<button type="button" class="btn btn-sm btn-link filter-toggle-btn d-none" aria-expanded="false"></button>
	</div>

        {# Buttons #}
        {% elseif type == 'buttons' %}
        {% if label and show_field_label %}
        <label class="form-label">{{ label }}</label>
        {% endif %}
        {% set layout = layout ?? 'horizontal' %}
        {% set button_class = button_class ?? 'btn-outline-primary' %}
        {% set all_label = all_label ?? 'Alles' %}
        {% set show_all_button = show_all_button ?? true %}
	
	<div class="filter-buttons {{ layout == 'vertical'
	? 'd-grid gap-2'
	: 'd-flex flex-wrap gap-2' }}" role="group">
	  {% if show_all_button %}
		<button type="button"
		  class="btn {{ button_class }}{{ active_value == '' ? ' active' }}"
		  data-filter-button
		  data-value="">
		  {{ all_label }}
		</button>
	  {% endif %}
	  {% for key, label in options %}
		<button type="button"
		  class="btn {{ button_class }}{{ active_value == key ? ' active' }}"
		  data-filter-button
		  data-value="{{ key }}">
		  {{ label }}
		</button>
	  {% endfor %}
	</div>
        <input type="hidden" name="{{ name }}" value="{{ active_value }}">

        {# Single Date Field #}
        {% elseif type == 'date' %}
        {% if label and show_field_label %}
        <label class="form-label">{{ label }}</label>
        {% endif %}
        <input type="text" class="form-control" name="{{ name }}" value="{{ value }}" data-date-picker data-date-format="{{ date_format }}">

        {# Date Range #}
        {% elseif type == 'date_range' %}
        {% if label and show_field_label %}
        <label class="form-label">{{ label }}</label>
        {% endif %}
        <div class="d-flex gap-2 align-items-center mb-3">
                <input type="text" class="form-control" name="from_{{ acf_field }}" value="{{ value.from ?? '' }}" data-date-range-start="{{ acf_field }}" data-date-format="{{ date_format }}">
                <span class="text-muted">tot</span>
                <input type="text" class="form-control" name="to_{{ acf_field }}" value="{{ value.to ?? '' }}" data-date-range-end="{{ acf_field }}" data-date-format="{{ date_format }}">
        </div>

        {# Range Slider #}
        {% elseif type == 'range' %}
        {% if label and show_field_label %}
        <label class="form-label">{{ label }}</label>
        {% endif %}
        <div class="range-wrapper">
                <div class="d-flex gap-2 align-items-center mb-3">
                        <input type="number" class="form-control" name="min_{{ acf_field }}" value="{{ value.min ?? options.min }}" min="{{ options.min }}" max="{{ options.max }}">

                        <span class="text-muted">tot</span>

                        <input type="number" class="form-control" name="max_{{ acf_field }}" value="{{ value.max ?? options.max }}" min="{{ options.min }}" max="{{ options.max }}">
                </div>

                <div class="range-slider" data-slider data-min="{{ options.min }}" data-max="{{ options.max }}">
                </div>
        </div>
{% endif %}
</div>
{% endif %}